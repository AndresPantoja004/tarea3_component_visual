<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>ESPE Search</title>
    <script type="module" src="src/components/espe-search-input.ts"></script>
    <script type="module" src="src/components/espe-course-card.ts"></script>
    <style>
      * {
        box-sizing: border-box;
      }

      body {
        font-family: sans-serif;
        margin: 0;
        padding: 0;
        background-color: #414141;
        display: flex;
        justify-content: center;
      }

      .container {
        max-width: 1100px;
        width: 90%;
        border: solid 3px black;
        padding: 40px 20px;
        border-radius: 20px;
        box-shadow: 10px 5px 10px 5px rgb(69, 69, 69);
        background-color: rgb(48, 48, 48);
        margin: 2rem auto;
      }

      h1 {
        text-align: center;
        font-size: 1.8rem;
        margin-bottom: 1.5rem;
        color: aliceblue;
      }

      .search-bar {
        max-width: 600px;
        margin: auto;
        margin-bottom: 2rem;
        width: 100%;
      }

      .container-courses {
        display: flex;
        justify-content: center;
      }

      section#asignaturas {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 1.5rem;
        width: 100%;
      }

      espe-course-card {
        width: 100%;
      }

      @media (max-width: 768px) {
        .container {
          padding: 20px 10px;
          
          place-content: center;
          place-items: center;
        }

        h1 {
          font-size: 1.4rem;
        }

        .search-bar {
          width: 50%;
        }
      }
    </style>
  </head>

  <body>
    <div class="container">
      <h1>BUSQUEDA ASIGNATURA</h1>

      <div class="search-bar">
        <espe-search-input
          theme="#986665"
          placeholder="Busca la asignatura"
        ></espe-search-input>
      </div>

      <div class="container-courses">
        <section id="asignaturas">
          <espe-course-card
            data-nombre="Investigación"
            title="Investigación"
            description="📘 Métodos científicos aplicados"
            progress="60"
            progressColor="green"
            buttonTheme="yellow"
          ></espe-course-card>

          <espe-course-card
            data-nombre="Ingeniería"
            title="Ingeniería"
            description="📗 Fundamentos de ingeniería general"
            progress="70"
            progressColor="green"
            buttonTheme="yellow"
          ></espe-course-card>

          <espe-course-card
            data-nombre="Administración"
            title="Administración"
            description="📙 Gestión y liderazgo organizacional"
            progress="40"
            progressColor="red"
            buttonTheme="green"
          ></espe-course-card>

          <espe-course-card
            data-nombre="Computación"
            title="Computación"
            description="💻 Fundamentos y algoritmos"
            progress="50"
            progressColor="green"
            buttonTheme="yellow"
          ></espe-course-card>

          <espe-course-card
            data-nombre="Biotecnología"
            title="Biotecnología"
            description="🧬 Procesos biológicos avanzados"
            progress="30"
            progressColor="red"
            buttonTheme="green"
          ></espe-course-card>
        </section>
      </div>
    </div>

    <script>
      const search = document.querySelector("espe-search-input");
      const cards = document.querySelectorAll("espe-course-card");

      const asignaturas = [
        "Investigación",
        "Ingeniería",
        "Administración",
        "Computación",
        "Biotecnología",
      ];
      search.suggestions = asignaturas;

      function filtrar(valor) {
        valor = valor.toLowerCase();
        cards.forEach((card) => {
          const nombre = card.dataset.nombre.toLowerCase();
          card.style.display = nombre.includes(valor) ? "block" : "none";
        });
        if (!valor) {
          cards.forEach((card) => (card.style.display = "block"));
        }
      }

      search.addEventListener("sugerencia-seleccionada", (e) => {
        filtrar(e.detail.value);
      });

      search.addEventListener("input", (e) => {
        filtrar(e.target.value);
      });

      search.addEventListener("buscar-enter", (e) => {
        search.loading = true;
        filtrar(e.detail.value);
        setTimeout(() => {
          search.loading = false;
        }, 1000);
      });
    </script>
  </body>
</html>
